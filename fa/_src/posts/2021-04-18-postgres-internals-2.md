    Title: ูพุณุชฺฏุฑุณ ฺฺฏููู ฺฉุงุฑ ูโฺฉูุฏุ ุฌูุณู ุฏู - ุฌุฏููโูุง ุณุณุชู
    Date: 2021-04-18T00:00:00
    Tags: ูพุณุชฺฏุฑุณ

ููฺฉ ูุฏุฆู: [youtu.be/hHkubRh-LXw](https://youtu.be/hHkubRh-LXw)

ุฏุฑ [ุฌูุณู ฺฉ](/fa/2021/04/ูพุณุชฺฏุฑุณ-ฺฺฏููู-ฺฉุงุฑ-ู-ฺฉูุฏ-ุฌูุณู-ฺฉ-ุฒูุฏฺฏ-ฺฉ-ฺฉูููุฑ.html) ฺฏูุชู ฺฉู ูพุณุชฺฏุฑุณ ูพุณ ุงุฒ parse ฺฉุฑุฏู ฺฉูุฆุฑุ ุฏุฑ ูุฑุญูู ุขูุงูุฒ
ุงุฑุฌุงุนุงุช ุจู ุฌุฏุงููุ ุณุชููโูุงุ ... ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.

ูุซูุง ุฏุฑ ฺฉูุฆุฑ ุฒุฑ:

```
SELECT a, b FROM t WHERE a > 0;
```

ุจุงุฏ ุงุฑุฌุงุนุงุช ุฒุฑ ุจุฑุฑุณ ุดููุฏ:

ฑ. ุขุง ุฌุฏูู ุจู ูุงู t ูุฌูุฏ ุฏุงุฑุฏุ ุฏุฑ ุตูุฑุช ูุฌูุฏุ ูุฑุงุฏุงุฏูโ ูุฑุจูุท ุจู t (ูุซู ูุณุฑ ูุงู ุฏุงุฏู) ฺุณุชุ
ฒ. ุขุง ุฌุฏูู t ุณุชููโูุง ุจู ูุงู a ู b ุฏุงุฑุฏุ ุฏุฑ ุตูุฑุช ูุฌูุฏุ ุงู ุณุชููโูุง ฺูุฏูู ุณุชููโูุง ุฏุฑ ุงู ุฌุฏูู ูุณุชูุฏุ
ณ. ููุน ุฏุงุฏูโูุง ุณุชููโูุง a ู b ฺุณุชุ
ด. ูุฑุถ ฺฉูุฏ ููุน ุณุชูู a ุนุฏุฏ ุตุญุญ ุงุณุช. ุขุง ุนูู `a > 0` ุจุฑุง ุงุนุฏุงุฏ ุตุญุญ ุชุนู ุดุฏู ุงุณุชุ ุงฺฏุฑ ุจูุ ุจุฑุง ุงูุฌุงู ุงู ุนูู ุจุงุฏ ุงุฒ ฺู ุชุงุจุน ุจุงุฏ ุงุณุชูุงุฏู ุดูุฏุ

ุฏุฑ ุงู ุจุฎุด ุจู ุงู ูโูพุฑุฏุงุฒู ฺฉู ูพุณุชฺฏุฑุณ ฺฺฏููู ุจู ุณูุงูโูุง ุจุงูุง ูพุงุณุฎ ูโุฏูุฏ.

<!-- more -->

### ูพุดโูุงุฒูุง

ุจุฑุง ุฏูุจุงู ฺฉุฑุฏู ุงู ุจุฎุด ูุงุฒ ูุฏุงุฑุฏ [ุฌูุณู ฺฉ](/fa/2021/04/ูพุณุชฺฏุฑุณ-ฺฺฏููู-ฺฉุงุฑ-ู-ฺฉูุฏ-ุฌูุณู-ฺฉ-ุฒูุฏฺฏ-ฺฉ-ฺฉูููุฑ.html) ุฑุง ุฎูุงูุฏู ุจุงุดุฏ.

ูู ูุงุฒ ุฏุงุฑุฏ ฺฉู ูพุณุชฺฏุฑุณ ุฑุง ฺฉุงููพุงู ู ูุตุจ ฺฉุฑุฏู ุจุงุดุฏ. ฺฏุงูโูุง ูุงุฒู ุจุฑุง ุงู ุงูุฑ ุฑุง ุฏุฑ 
[ุงู ููุงูู](/fa/2020/05/ูพุณุชฺฏุฑุณ-ฺฺฏููู-ฺฉุงุฑ-ู-ฺฉูุฏ-ุฌูุณู-ุตูุฑ.html) ุขูุฑุฏูโุงู.

## ูุฑุงุฏุงุฏูโ ุฌุฏูู: pg_class

ูุฑุงุฏุงุฏูโ ูุฑุจูุท ุจู ุฌุฏููโูุง ุฏุฑ ุฌุฏูู ุณุณุชู pg_class ูุฑุงุฑ ุฏุงุฑุฏ. ูุซูุง ุจุฑุง ุงูฺฉู ูุฑุงุฏุงุฏู ุฌุฏูู ุจู ูุงู t ุฑุง ุจุจููุ ูโุชูุงูู ุงุฒ ฺฉูุฆุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูู. ุจุฎุดโูุง ุงุฒ ุฎุฑูุฌ ุฑุง ุฏุฑ ุฒุฑ ูโุจูุฏ:

```
postgres=# SELECT * FROM pg_class WHERE relname='t';
-[ RECORD 1 ]-------+------
oid                 | 16394
relname             | t
...
relfilenode         | 16394
...
relkind             | r
relnatts            | 2
...
```

ุฏุฑ ุฎุฑูุฌ ุจุงูุง:

* ููุฏุงุฑ relname ูุงู ุฌุฏูู ุงุณุช.
* ููุฏุงุฑ oid ุดูุงุฑู ุฏุงุฎู ุฌุฏูู ุงุณุช. ุฏุฑ ุขูุฏู ุฎูุงูู ุฏุฏ ฺฉู ุงู ุดูุงุฑู ุฏุฑ ุฌุฏููโูุง ุณุณุชู ุฏฺฏุฑ (ูุซูุง ุฌุฏูู ูุฑุจูุท ุจู ุณุชููโูุง) ุจุฑุง ุงุดุงุฑู ุจู ุฌุฏูู ุงุณุชูุงุฏู ูโุดูุฏ.
* ููุฏุงุฑ relkind ูุดุงู ูโุฏูุฏ ฺฉู ุงู ุฑฺฉูุฑุฏ ุฏุฑ pg_class ุฏุฑ ูุงูุน ูุฑุจูุท ุจู ฺฉ ุฌุฏูู ุงุณุช. ุฌุฏูู ุณุณุชู pg_class ูโุชูุงูุฏ ุดุงูู ูุฑุงุฏุงุฏู ุงูุฏฺฉุณุ viewุ ... ูุฒ ุจุงุดุฏ ฺฉู ุจุฑุง ุขู ููุงุฑุฏ ููุฏุงุฑ relkind ูุชูุงูุช ุฎูุงูุฏ ุจูุฏ.
* ููุฏุงุฑ relnatts ุชุนุฏุงุฏ ุณุชููโูุง ุฌุฏูู ุฑุง ูุดุงู ูโุฏูุฏ.

#### relfilenode

ุฏุฑ ุฎุฑูุฌ ุจุงูุง ููุฏุงุฑ relfilenode ูุงู ูุงู ุงุณุช ฺฉู ุฏุฑ ุฏุณฺฉ ุจุฑุง ุฐุฎุฑู ุงุทูุงุนุงุช ุฌุฏูู t ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ูุณุฑ ฺฉุงูู ูุงู ุงุฒ ูุฑููู ุฒุฑ ุจู ุฏุณุช ูโุขุฏ:

```
$PGDATA/base/$database_id/$relfilenode
```

ฺฉู `$PGDATA` ูุณุฑ ุฏุงุฑฺฉุชูุฑ ฺฉูุงุณุชุฑ ูพุณุชฺฏุฑุณ ุงุณุช. ุงุณู ุงู ุฏุงุฑฺฉุชูุฑ ุฑุง ูููุน ุงุฌุฑุง initdb ุงูุชุฎุงุจ ฺฉุฑุฏุฏ. ุงฺฏุฑ ูุณุฑ ุงู ุฏุงุฑฺฉุชูุฑ ุฑุง ูุฑุงููุด ฺฉุฑุฏูโุงุฏุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ูโุชูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ:

```
postgres=# show data_directory;
-[ RECORD 1 ]--+----------------
data_directory | /home/hadi/data
```

`$database_id` ุดูุงุฑู ุฏุงุฎู ุฏุชุงุจุณ ุงุณุช. ุงุณู ุฏุชุงุจุณ ฺฉู ูุง ุงุณุชูุงุฏู ูโฺฉูู postgres ุงุณุช. ุจุฑุง ุงูุชู ุดูุงุฑู ุขู ูโุชูุงูุฏ ุงุฒ ุฌุฏูู pg_class ุงุณุชูุงุฏู ฺฉูุฏ:

```
postgres=# select oid from pg_database where datname='postgres';
  oid
-------
 12675
(1 row)
```

ูพุณ ุจุฑุง ุฌุฏูู ุจุงูุง ูุณุฑ ูุงู ูุฑุจูุท ุจู ุฌุฏูู tุ ุฎูุงูุฏ ุจูุฏ: `/home/hadi/data/base/12675/16394`.

ุจุฑุง ุขุณุงูุ ูโุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ูุฒ ุจุฑุง ุงูุชู ูุณุฑ ูุงู ุงุณุชูุงุฏู ฺฉูุฏ:

```
postgres=# SELECT pg_relation_filepath('t');
 pg_relation_filepath
----------------------
 base/12675/16394
(1 row)
```

#### ุขุง relfilenode ููุดู ุจุง ุดูุงุฑู ุฌุฏูู ฺฉุณุงู ุงุณุชุ

ุฏุฑ ุฎุฑูุฌ ุจุงูุง ุฏุฏู ฺฉู ูู ุดูุงุฑู ุฌุฏูู (oid) ู ูู relfilenode ฺฉุณุงู ู ุจุฑุงุจุฑ ุจุง 16394 ุจูุฏูุฏ. ููุฏุงุฑ ุงููู ุงู ุฏู ฺฉุณุงู ุงุณุช. ููุฏุงุฑ ุดูุงุฑู ุฌุฏูู ูฺโฺฏุงู ุชุบุฑ ููโฺฉูุฏุ ูู ุจุฑุฎ ุฏุณุชูุฑุงุช
ูุณุชูุฏ ฺฉู ููฺฉู ุงุณุช relfilenode ุฑุง ุชุบุฑ ุฏููุฏ. ูุซูุง ุฏุณุชูุฑ TRUNCATE ฺฉู ุชูุงู ุณุทุฑูุง ฺฉ ุฌุฏูู ุฑุง ุญุฐู ูโฺฉูุฏ:

```
postgres=# truncate t;
TRUNCATE TABLE
postgres=# select oid, relfilenode from pg_class where relname='t';
  oid  | relfilenode
-------+-------------
 16394 |       24586
(1 row)
```

ูพุงุฏูโุณุงุฒ ุฏุงุฎู TRUNCATE ุงุจุชุฏุง ฺฉ ูุงู ุฎุงู ุจุง ูุงู relfilenode ุฌุฏุฏ ุงุฌุงุฏ ูโฺฉูุฏุ ุณูพุณ ููุฏุงุฑ relfilenode ุฑุง ุฏุฑ pg_class ุชุบุฑ ูโุฏูุฏุ ู ุณูพุณ ูุงู ูุฏู ุฑุง ูพุงฺฉ ูโฺฉูุฏ.

#### ููุงุจุน ุจุดุชุฑ

* [ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู pg_class](https://www.postgresql.org/docs/current/catalog-pg-class.html)
* [ฺฉุฏ ุชุบุฑ relfilenode](https://github.com/postgres/postgres/blob/091e22b2e673e3e8480abd68fbb827c5d6979615/src/backend/utils/cache/relcache.c#L3576)

## ูุฑุงุฏุงุฏู ุณุชููโูุง: pg_attribute

ุงูฺฉู ุฌุฏูู ฺู ุณุชููโูุง ุฏุงุฑุฏ ู ููุน ุขู ุณุชููโูุง ฺุณุช ุฑุง ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฌุฏูู ุณุณุชู pg_attribute
ุจู ุฏุณุช ุจุงูุฑู.

ุจู ุงุฒุง ูุฑ ุณุชูู ุฌุฏูู ุฏุฑ pg_attribute ฺฉ ุณุทุฑ ูุฌูุฏ ุฏุงุฑุฏ. ุนูุงูู ุจุฑ ุงู ูุฑ ุฌุฏูู ฺฉ ุณุฑ ุณุชููโูุง
ุณุณุชู ูุงููุฏ cmax, xmax, cmin, xmin, ... ุฏุงุฑุฏ ฺฉู ุจู ุงุฒุง ุขูโูุง ูุฒ ฺฉ ุณุฑ ุฏุฑ pg_attribute ูุฌูุฏ ุฏุงุฑุฏ.

ุจู ุงู ุณุชููโูุง ุณุณุชู ุฏุฑ ุฌูุณุงุช ุขูุฏู ุฎูุงูู ูพุฑุฏุงุฎุช.

ุจุฑุง ุงูฺฉู ุชููุง ุงุทูุงุนุงุช ูุฑุจูุท ุจู ุณุชููโูุง ุบุฑ ุณุณุชู ุฌุฏูู ุฑุง ุจุจููุ ุดุฑุท `attnum > 0` ุฑุง ุจู ฺฉูุฆุฑ ุฒุฑ ุงุถุงูู ูโฺฉูู:

```
postgres=# select * from pg_attribute where attrelid = 16394 and attnum > 0;
```

ุฏุฑ ฺฉูุฆุฑ ุจุงูุง ูุฑุถ ุดุฏู ุงุณุช ฺฉู ุดูุงุฑู ุฌุฏูู t ุจุฑุงุจุฑ ุจุง 16394 ุงุณุช. ููุฏุงุฑ ุขู ุฑุง ุฏุฑ ุจุงูุง ุงุฒ pg_class
ุจู ุฏุณุช ุขูุฑุฏู.

ุฎุฑูุฌ ฺฉูุฆุฑ ุจุงูุง ุฎูุงูุฏ ุจูุฏ:

```
-[ RECORD 1 ]--+------
attrelid       | 16394
attname        | a
atttypid       | 23
...
attnum         | 1
...
attisdropped   | f
...
-[ RECORD 2 ]--+------
attrelid       | 16394
attname        | b
atttypid       | 23
...
attnum         | 2
...
attisdropped   | f
...
```

ุงุฒ ุฌููู ุงุทูุงุนุงุช ฺฉู ุฏุฑ ุฎุฑูุฌ ุจุงูุง ูโุจูู:

1. ุดูุงุฑู ุชุฑุชุจ ูุฑ ุณุชูู (attnum)
2. ุงุณู ุณุชูู (attname)
3. ุงูฺฉู ุขุง ุณุชูู ุญุฐู ุดุฏู ุงุณุช ุง ูู (attisdropped)

#### ุญุฐู ฺฉุฑุฏู ฺฉ ุณุชูู

ูุซูุง ูุฑุถ ฺฉูุฏ ฺฉู ุฏู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูู ุชุง ฺฉ ุณุชูู ุญุฐู ุดูุฏ ู ฺฉ ุณุชูู ุงุถุงูู ุดูุฏ:

```
ALTER TABLE t DROP COLUMN b;
ALTER TABLE t ADD COLUMN c text;
```

ุงุทูุงุนุงุช ุณุชููโูุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ุฎูุงูุฏ ฺฉุฑุฏ:

```
postgres=# select attname, attnum, attisdropped from pg_attribute where attrelid = 16394 and attnum > 0;
-[ RECORD 1 ]+-----------------------------
attname      | a
attnum       | 1
attisdropped | f
-[ RECORD 2 ]+-----------------------------
attname      | ........pg.dropped.2........
attnum       | 2
attisdropped | t
-[ RECORD 3 ]+-----------------------------
attname      | c
attnum       | 3
attisdropped | f
```

ููุงูุทูุฑ ฺฉู ูุดุงูุฏู ูโฺฉูุฏ ููุฏ attisdropped ุณุชูู ุฏูู ุจู ููุฏุงุฑ true ุชุบุฑ ฺฉุฑุฏ ู ุงุณู ุขู ูุฒ ุชุบุฑ ฺฉุฑุฏ.

ุจู ุงูฺฉู ฺุฑุง ุงู ุณุชูู ฺฉูุง ุญุฐู ูุดุฏ ุฏุฑ ุฌูุณุงุช ุขูุฏู ุฎูุงูู ูพุฑุฏุงุฎุช.

#### ููุงุจุน ุจุดุชุฑ

* [ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู pg_attribute](https://www.postgresql.org/docs/current/catalog-pg-attribute.html)


## ูุฑุงุฏุงุฏู ููุนโูุง: pg_type

ุงฺฉููู ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ pg_attribute ุดูุงุฑู ููุน ุณุชููโูุง ุฑุง ุจุฏุณุช ุขูุฑุฏูุ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ 
ุฌุฏูู ุณุณุชู pg_type ุจู ุฌุฒุงุช ููุนโูุง ูฺฏุงู ฺฉูู.

ูุซูุง ุฏุฑ ูุซุงู ูุจู ููุน ุณุชูู a ุดูุงุฑู 23 ุฏุงุดุช. ุจุฑุง ูุดุงูุฏู ุงุทูุงุนุงุช ุงู ููุน ุงุฒ ฺฉูุฆุฑ ุฒุฑ ุงุณุชูุงุฏู ูโฺฉูู:

```
postgres=# SELECT * FROM pg_type WHERE oid=23;
-[ RECORD 1 ]--+---------
oid            | 23
typname        | int4
...
typlen         | 4
...
typinput       | int4in
typoutput      | int4out
...
```

ฺฉู ุงุทูุงุนุงุช ูุงููุฏ ุงุณู ููุน (typname)ุ ุทูู ฺฉ ููุฏุงุฑ ุงุฒ ุงู ููุน (typlen)ุ ุชุงุจุน ุชุจุฏู ุฑุดุชู ุจู ุงู ููุน
(int4in)ุ ู ุชุงุจุน ุชุจุฏู ุงู ููุน ุจู ุฑุดุชู (int4out) ุฑุง ุจู ูุง ูุฏูุฏ.

#### ููุงุจุน ุจุดุชุฑ

* [ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู pg_type](https://www.postgresql.org/docs/current/catalog-pg-type.html)

## ูุฑุงุฏุงุฏู ุนููฺฏุฑูุง ู ุชูุงุจุน: pg_operator ู pg_proc

ุจุฑุง ุงูฺฉู ุจูููู ููุงุณู `a > 0` ุฏุฑ ูุซุงู ฺฉู ุฏุฑ ุจุงูุง ุฒุฏู ฺฺฏููู ุจุงุฏ ุงุฌุฑุง ฺฉููุ ูุฑุงุญู ุฒุฑ ุฑุง
ุงูุฌุงู ูโุฏูู:

1. ุจุง ุงุณุชูุงุฏู ุงุฒ pg_operator ุนููฺฏุฑ ฺฉู ููุงุฏุด `>` ุงุณุช ู ุฏู ุนุฏุฏ ุตุญุญ ุฑุง ููุงุณู ูโฺฉูุฏ ุฑุง ูพุฏุง ูโฺฉูู
2. ุงุฒ ุฑฺฉูุฑุฏ pg_operator ุงุณู ุชุงุจุน ฺฉู ุงู ุนูู ุจู ุฏุณุช ูโุขูุฑู.
3. ุฏุฑ pg_proc ุชุงุจุน ฺฉู ุฏุฑ ูุฑุญูู ฒ ุงูุชู ุฑุง ูพุฏุง ูโฺฉูู. ุฑฺฉูุฑุฏ ูุฑุชุจุท ุฏุฑ pg_proc ุงุทูุงุนุงุช ฺฉุงู ุจุฑุง ุงุฌุฑุง ุชุงุจุน ุฑุง ุฏุงุฑุฏ.

ูุซูุง ููุน ุนุฏุฏ ุตุญุญ ด ุจุงุช ุฏุฑ ูุซุงู ูุจู ุฏุงุฑุง ุดูุงุฑู 23 ุจูุฏ. ุจุฑุง ุงูุชู ุนูู ููุงุณู ุฏู ุนุฏุฏ ุตุญุญ:

```
postgres=# select * from pg_operator where oprname='<' and oprleft=23 and oprright=23;
-[ RECORD 1 ]+----------------
oid          | 97
oprname      | <
...
oprleft      | 23
oprright     | 23
oprresult    | 16
...
oprcode      | int4lt
...
```

ุงุฒ ุฎุฑูุฌ ุจุงูุง ููููู ฺฉู ุฎุฑูุฌ ุงู ุนููฺฏุฑ ุฏุงุฑุง ููุน 16 ุง ูููู ุจููู ุงุณุช ู ุงุณู ุชุงุจุน ฺฉู ุงู
ุนููฺฏุฑ ุฑุง ุงุฌุฑุง ูโฺฉูุฏ int4lt ุงุณุช.

ุจุฑุง ุงูุชู ุงุทูุงุนุงุช ูุฑุจูุท ุจู int4lt:

```
postgres=# select * from pg_proc where proname='int4lt';
-[ RECORD 1 ]---+-------
oid             | 66
proname         | int4lt
...
prolang         | 12
...
proargtypes     | 23 23
...
prosrc          | int4lt
...
```

ุฏุฑ ุฎุฑูุฌ ุจุงูุง ุฐฺฉุฑ ุดุฏู ุงุณุช ฺฉู ุฒุจุงู ุงู ุชุงุจุน 12 ุงุณุช. ุจุฑุง ุงูุชู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ุฒุจุงู 12:

```
postgres=# select * from pg_language where oid=12;
-[ RECORD 1 ]-+---------
oid           | 12
lanname       | internal
...
```

ุงุฒ ฺฉูุงุฑ ฺฏุฐุงุดุชู ุฏู ุฎุฑูุฌ ุงุฎุฑ ููููู ฺฉู int4lt  ฺฉ ุชุงุจุน ุฏุงุฎู ุฏุฑ ุณูุฑุณ ฺฉุฏ ูพุณุชฺฏุฑุณ ุงุณุช.

ุงู ุชุงุจุน ุฏุงุฎู ุฏุฑ [postgres/src/backend/utils/adt/int.c](https://github.com/postgres/postgres/blob/c30f54ad732ca5c8762bb68bbe0f51de9137dd72/src/backend/utils/adt/int.c#L393)
ูุชูุงูุฏ ุจุงุจุฏ.

#### ููุงุจุน ุจุดุชุฑ

* [ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู pg_operator](https://www.postgresql.org/docs/current/catalog-pg-operator.html)
* [ุงุทูุงุนุงุช ฺฉุงูู ุฏุฑุจุงุฑู pg_proc](https://www.postgresql.org/docs/current/catalog-pg-proc.html)

## ูุซุงู

ุจุง ฺุฒูุง ฺฉู ุฏุฑ ุงู ุฌูุณู ุงุฏฺฏุฑูุชูุ ูโุฎูุงูู ฺฉ ุชุงุจุน ุจููุณู ฺฉู ุงุณู ุฌุฏูู ุฑุง ุจู ุตูุฑุช ฺฉ
ุฑุดุชู ูุชู ุจฺฏุฑุฏ ู ุฏุณุชูุฑ CREATE TABLE ุขู ุฑุง ุจู ุตูุฑุช ุฑุดุชู ูุชู ุฎุฑูุฌ ุฏูุฏ.

ุฏุฑ ูุฏุฆู ุจู ุทูุฑ ฺฉุงูู ุงู ุฑุง ุชูุถุญ ุฏุงุฏู. ูุชุฌู ููุง ุนุจุงุฑุช ุจูุฏ ุงุฒ:

```sql
CREATE FUNCTION table_name_to_create_table(table_name text) RETURNS text
AS $$
  SELECT 'CREATE TABLE ' || relname || '(' ||
         string_agg(attname || ' ' || typname, ', ') || ')'
  FROM pg_type, pg_class, pg_attribute
  WHERE relname=table_name and
        pg_class.oid=pg_attribute.attrelid and
        attnum > 0 and not attisdropped and
        pg_type.oid=atttypid
  group by relname;
$$ LANGUAGE sql;
```

ุจุฑุง ุฌุฒุฆุงุช ุจู ูุฏุฆู ูุฑุงุฌุนู ฺฉูุฏ.

## ุชฺฉูู ฺฉุงุฑ ุฏุฑ ุฎุงูู ๐

ุซุงู ุฑุง ุชุบุฑ ุฏูุฏ ุชุง ุจุง ุงุณุชูุงุฏู ุงุฒ ููุฏ attnotnull ุฌุฏูู pg_attribute ุจุฑุง ูุฑ ุณุชูู NOT NULL ุง NULL
ุฏุฑุณุช ุฑุง ุงุถุงูู ฺฉูุฏ.

ูุซูุง ุงฺฏุฑ ุฌุฏูู ุจู ุตูุฑุช ุฒุฑ ุงุฌุงุฏ ุดุฏู ุจุงุดุฏุ

```
CREATE TABLE t(a int NOT NULL, b int);
```

ุฎุฑูุฌ ุชุงุจุน ฺฉู ุฏุฑ ุจุฎุด ูุซุงู ููุดุชู ูุดุฎุตู NOT NULL ุณุชูู ุงูู ุฑุง ุฐฺฉุฑ ูุฎูุงูุฏ ฺฉุฑุฏ. ุชุบุฑ ุฏูุฏ ุชุง ุงู ูุดฺฉู
ุจุฑุทุฑู ุดูุฏ.

ุงฺฏุฑ ูุดฺฉู ุฏุฑ ุฏูุจุงู ฺฉุฑุฏู ุงู ููุงูู ุง ูุฏุฆู ุฏุงุดุชุฏุ ุงฺฏุฑ ูพุดููุงุฏ ุง ุงูุชูุงุฏ ุฏุงุดุชุฏุ ุง ุงฺฏุฑ ุณูุงู ุฏุงุดุชุฏุ ูุชูุงูุฏ ุงุฒ ุฑูุดโูุง ุฒุฑ ุจุง ูู ุชูุงุณ ุจฺฏุฑุฏ:

1. ูพุงู ูุณุชูู ุฏุฑ ุชูุชุฑ ุจู ุงฺฉุงูุช pykello_fa
2. ุงูู ุจู hadi [at] moshayedi [dot] net.

ููููู ฺฉู ููุช ฺฏุฐุงุดุชุฏ ู ุงูุฏูุงุฑู ุงุณุชูุงุฏู ฺฉุฑุฏู ุจุงุดุฏ.