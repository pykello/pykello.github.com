<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>پیک نوروزی ۱۴۰۱ - روزهای ۱ تا ۴</title>
    <meta name="description" content="در طی نوروز ۱۴۰۱، در ۸ توویت با هش‌تگ #پیک‌نوروزی ۸ سوال و تمرین مطرح کردم. در این بلاگ‌پست و چند  بخش بعدی این سوال‌ها و پاسخ‌ها را می‌آورم.  در این بخش:   روز ۱. فشرده‌سازی اعداد شبهه‌تصادفی روز ۲. کاشی‌کاری فیبوناچی   روز ۳. نمودار اشتراک ۴ مجموعه   رو...">
    <meta name="author"      content="هادی مشیدی">
    <meta name="keywords"    content="چالش‌برنامه‌نویسی">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/fa/favicon.svg">
    <link rel="canonical" href="http://pykello.github.com/fa//fa/2022/05/%D9%BE%DB%8C%DA%A9-%D9%86%D9%88%D8%B1%D9%88%D8%B2%DB%8C-%DB%B1%DB%B4%DB%B0%DB%B1-%D8%B1%D9%88%D8%B2%D9%87%D8%A7%DB%8C-%DB%B1-%D8%AA%D8%A7-%DB%B4.html">
    <link rel="next" href="/fa/2021/06/%D8%A8%D9%87%DB%8C%D9%86%D9%87-%D8%B3%D8%A7%D8%B2-%D9%BE%D8%B3%D8%AA%DA%AF%D8%B1%D8%B3-%D8%A8%D8%AE%D8%B4-%DB%8C%DA%A9%D9%85.html">
    <link rel="prev" href="/fa/2022/05/%D9%BE%DB%8C%DA%A9-%D9%86%D9%88%D8%B1%D9%88%D8%B2%DB%8C-%DB%B1%DB%B4%DB%B0%DB%B1-%D8%B1%D9%88%D8%B2%D9%87%D8%A7%DB%8C-%DB%B5-%D8%AA%D8%A7-%DB%B8.html">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/fa/css/monochrome.css">
    <link rel="stylesheet" type="text/css" href="/fa/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/fa/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/fa/css/custom.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/fa/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/fa/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>

    <!-- Header -->

    <header id="header" class="parent justify-spaceBetween">
      <div class="inner w100 relative">
        <span class="f-left">
          <a href="/fa">
            <h1>
              <span>the</span>lost<span>packet</span>
            </h1>
          </a>
        </span>
      </div>
    </header>

    <div id="container">
        <main>
            <article>
  <header>
    <h1>پیک نوروزی ۱۴۰۱ - روزهای ۱ تا ۴</h1>
    <p class='date-and-tags'>
<time datetime="2022-05-06" pubdate="true">2022-05-06</time> :: <span class="tags"><a href="/fa/tags/%DA%86%D8%A7%D9%84%D8%B4-%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C.html">چالش‌برنامه‌نویسی</a></span></p>
    <p class='authors'><span class="authors">هادی مشیدی</span></p>
  </header>

<p>در طی نوروز ۱۴۰۱، در ۸ توویت با هش‌تگ #پیک‌نوروزی ۸ سوال و تمرین مطرح کردم. در این بلاگ‌پست و چند  بخش بعدی این سوال‌ها و پاسخ‌ها را می‌آورم.</p>

<p>در این بخش:</p>

<ul>
 <li>روز ۱. فشرده‌سازی اعداد شبهه‌تصادفی</li>
 <li>روز ۲. کاشی‌کاری فیبوناچی</li>
 <li>روز ۳. نمودار اشتراک ۴ مجموعه</li>
 <li>روز ۴. مقدار بازگشتی تابع fork</li></ul>
<!-- more-->

<h2 id="روز-۱-فشردهسازی-اعداد-شبههتصادفی">روز ۱. فشرده‌سازی اعداد شبهه‌تصادفی</h2>

<p>لینک توویت: https://twitter.com/pykello_fa/status/1505806994241859585</p>

<p>می‌خواهیم خروجی برنامه‌ی زیر را که تعدادی عدد با استفاده از ماژول  random   پایتون تولید می‌کند را فشرده کنیم و به یکی ارسال کنیم.</p>

<p>با فرض اینکه گیرنده سورس‌کد برنامه‌ی ما را از قبل دارد و دقیقا می‌داند خروجی چگونه تولید شده، چه روش فشرده‌سازی پیشنهاد می‌دهید؟</p>

<p> <img src="/img/peyk-1.png" alt="کد پیک‌نوروزی ۱" /></p>

<h3 id="پاسخ-و-بحث">پاسخ و بحث</h3>

<p>لینک توویت پاسخ: https://twitter.com/pykello_fa/status/1506122913828667393</p>

<p>جواب‌های خوبی با فرض‌هایی که هر کسی کرده بود داده شد.</p>

<p>هدفم از این سوال تاکید بر این بود که تابع random.randint  تصادفی کامل نیست، و شبهه‌تصادفی‌است. یعنی اگر random.seed  «یکسان» اول هر کدی بگذارید که با استفاده از کتابخانه‌ی random  مقادیری رو تولید می‌کند، هر دفعه دقیقا خروجی یکسان خواهید گرفت.</p>

<p>مثلا کد زیر حتی اگر ۱۰ بار هم اجرا کنم، نتیجه همان خواهد بود:</p>

<p> <img src="/img/peyk-1a.png" alt="کد پیک‌نوروزی ۱" /></p>

<p>دقت کنید که اگر seed رو ریست نکنیم، دنباله متفاوت خواهد بود (دو لیست اول رو با لیست آخر مقایسه کنید):</p>

<p> <img src="/img/peyk-1b.png" alt="کد پیک‌نوروزی ۱" /></p>

<p>حال اگر بجای t = int(time.time()) در کد مساله‌ی اصلی یک عدد ثابت بگذارم، خروجی حتی پس از ۱۰۰ بار اجرا باز هم همان خروجی اولیه خواهد بود.</p>

<p>پس مقدار t است که مشخص‌کننده‌ی خروجی است، و با توجه به اینکه فرض کردیم گیرنده سورس‌کد تولید کننده را دارد، کافی‌است t را به گیرنده بفرستیم تا همان خروجی را بگیرد.</p>

<p>❓ <strong>سوال:</strong> ما الان فقط خروجی رو داریم و  t رو چاپ نکردیم، چه کنیم؟</p>

<p>💭 هر روز ۸۶۴۰۰ ثانیه بیشتر ندارد، می‌تونید از زمان حال شروع کنید و ثانیه به ثانیه عقب بروید  و دنباله رو تولید و دنباله‌ی چاپ شده مقایسه کنید تا t ای که دنباله رو تولید کنه رو پیدا کنید من این کار رو کردم، و برای هر روز ۰/۷ ثانیه بیشتر طول نمی‌کشید.</p>

<p><strong>چند نکته:</strong></p>

<ol>
 <li>کد تولید عدد رندوم پایتون رو می‌تونید در فایل‌های زیر بیابید:
  <ul>
   <li><a href="https://github.com/python/cpython/blob/204946986feee7bc80b233350377d24d20fcb1b8/Modules/_randommodule.c">_randommodule.c</a></li>
   <li><a href="https://github.com/python/cpython/blob/204946986feee7bc80b233350377d24d20fcb1b8/Lib/random.py">random.py</a></li></ul></li>
 <li>پیاده‌سازی  randint بین نسخه‌ی پایتون ۳.۱ و ۳.۲ فرق کرده. یعنی اگه کد اصلی رو روی پایتون قبل یا مساوی ۳.۱ اجرا کنید یک جواب می‌گیرید، و روی پایتون ۳.۲ و بعد یک جواب دیگر.</li></ol>

<h2 id="روز-۲-کاشیکاری-فیبوناچی">روز ۲. کاشی‌کاری فیبوناچی</h2>

<p>لینک توویت: https://twitter.com/pykello_fa/status/1506162255359987712</p>

<p>فرض کنید یک صفحه‌ی شطرنجی 2xn دارید. می‌خواهیم این صفحه را با کاشی‌هایی با اندازه‌ی 1x2 یا 2x1 پر کنیم. در زبان دلخواه خود برنامه‌ای بنویسید که با گرفتن n تصویر همه‌ی کاشی‌کاری‌های ممکن را تولید کند.</p>

<p>مثلا برای ۴:</p>

<p> <img src="/img/peyk-2.png" alt="کد پیک‌نوروزی ۲" /></p>

<p>تصویر را به طریق دلخواه تولید کنید (صفحه‌ی وب، کشیدن روی gui، فایل، یا اگر repl زبانتان مقادیر تصویری پشتیبانی می‌کند مقادیر تصویری، &hellip;)</p>

<p>از نتیجه اسکرین‌شات بگیرید یا در جایی به اشتراک بگذارید و کامنت کنید 🌼</p>

<h3 id="پاسخ-و-بحث">پاسخ و بحث</h3>

<p>لینک توویت پاسخ: https://twitter.com/pykello_fa/status/1506485589721305090</p>

<p>کد من با استفاده از زبان <a href="https://www.pyret.org/">Pyret</a>:</p>

<pre><code>include image
include color

fun tilings(n) -&gt; List&lt;Image&gt;:
  single_vertical = rectangle(20, 40, "outline", "black")
  double_horizontal =
    above(
      rectangle(40, 20, "outline", "black"),
      rectangle(40, 20, "outline", "black"))

  if n == 0:
    [list: empty-image]
  else if n == 1:
    [list: single_vertical]
  else:
    for map(subtiling from tilings(n - 1)):
        beside(single_vertical, subtiling)
    end
    +
    for map(subtiling from tilings(n - 2)):
        beside(double_horizontal, subtiling)
    end
  end
end</code></pre>

<h3 id="سوال-نمرهاضافی">سوال نمره‌اضافی</h3>

<p>برای تمرین بیشتر و حل مساله‌ای کمی سخت‌تر، برنامه‌ای بنویسید که لیست همه‌ی کاشی‌کاری‌های ممکن صفحه‌ی شطرنجی 2xn رو با دقیقا دو تا 1x1 و تعداد دلخواهی 1x2 و 2x1 پیدا کنه.</p>

<p> <img src="/img/peyk-2a.png" alt="کد پیک‌نوروزی ۲" /></p>

<h2 id="روز-۳-نمودار-اشتراک-۴-مجموعه">روز ۳. نمودار اشتراک ۴ مجموعه</h2>

<p>لینک توویت: https://twitter.com/pykello_fa/status/1506518858374389760</p>

<p>می‌دونیم ۸ حالت اشتراک ۳ مجموعه رو می‌شه با استفاده از ۳ دایره به شکل زیر نشون داد.</p>

<p>آیا می‌شه ۱۶ حالت اشتراک ۴ مجموعه رو با استفاده از ۴ دایره نشون داد؟ اگه آره، شکلش رو بکشین. اگه نه، ۱. چرا؟ ۲. آیا با ۴ بیضی می‌شه؟</p>

<p> <img src="/img/peyk-3.png" alt="کد پیک‌نوروزی ۳" /></p>

<h3 id="پاسخ-و-بحث">پاسخ و بحث</h3>

<p>لینک توویت پاسخ: https://twitter.com/pykello_fa/status/1506843010012643332</p>

<p>این سوال رو از تمرینات فصل اول کتاب «Concrete Mathematics» برداشته بودم. راه‌حل‌های خیلی خوبی ارائه شد.</p>

<p>توضیح اینکه چرا با دایره نمی‌شود، توسط جالینوکس:</p>

<center>
 <blockquote class="twitter-tweet" data-conversation="none">
  <p lang="fa" dir="rtl">با دایره نمی‌شه. با بیضی می‌شه ولی بیضی هم تا ۵ تا مجموعه رو جواب می‌ده. (چون یک بیضی می‌تونه بیضی دیگه رو حداکثر در ۴ نقطه قطع کنه) <a href="https://t.co/Pely975eQY">pic.twitter.com/Pely975eQY</a></p>&mdash; جالینوکس (@iam_vee) <a href="https://twitter.com/iam_vee/status/1506530827722711041?ref_src=twsrc%5Etfw">March 23, 2022</a></blockquote> 
 <script async="async" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></center>

<p>نمونه جواب با بیضی  توسط <a href="https://twitter.com/alibaygi">علی بیگی</a>:</p>

<p> <img src="/img/peyk-3a.png" alt="کد پیک‌نوروزی ۳" /></p>

<p>نمونه جواب با بیضی توسط <a href="https://twitter.com/SaviorCthulhu">Mohsen the Scripter</a>:</p>

<p> <img src="/img/peyk-3b.png" alt="کد پیک‌نوروزی ۳" /></p>

<p>نمونه جواب با بیضی توسط <a href="https://twitter.com/Najmeh94922515">NAJMEH</a>:</p>

<p> <img src="/img/peyk-3c.png" alt="کد پیک‌نوروزی ۳" /></p>

<h2 id="روز-۴-مقدار-بازگشتی-تابع-fork">روز ۴. مقدار بازگشتی تابع fork</h2>

<p>لینک توویت: https://twitter.com/pykello_fa/status/1506878360684703744</p>

<p>در لینوکس تابع fork یک پروسس فرزند ایجاد می‌کند که کپی پروسس اصلی است و از همان نقطه به بعد به اجرا ادامه می‌دهد. با این تفاوت که در پروسس اصلی مقدار شناسه‌ی فرزند برگردانده می‌شود و در پروسس فرزند مقدار 0.</p>

<p>با نگاه به کد لینوکس 1.0، پیدا کنید که fork چگونه دو مقدار متفاوت در پروسس اصلی و فرزند برمی‌گرداند؟</p>

<p> <img src="/img/peyk-4.jpg" alt="کد پیک‌نوروزی ۴" /></p>

<p>کد سیستم‌کال fork در لینوکس 1.0: https://github.com/kalamangga-net/linux&ndash;1.0/blob/master/kernel/fork.c</p>

<p>طریقه‌ی فراخوانی و برگرداندن مقدار بازگشتی سیستم‌کال‌ها: https://en.wikibooks.org/wiki/X86_Assembly/Interfacing_with_Linux</p>

<h3 id="پاسخ-و-بحث">پاسخ و بحث</h3>

<p>لینک توویت پاسخ: https://twitter.com/pykello_fa/status/1507255396414590982</p>

<p>پاسخ خلاصه اینه که لینوکس پاسخ سیستم‌کال‌ها رو در معماری x86 میذاره در رجیستر eax، پس همونطور که چند نفر از دوستان ( <a href="https://twitter.com/shahriarshm">@shahriarshm</a> ، <a href="https://twitter.com/kafkakh">@kafkakh</a> ، <a href="https://twitter.com/SoroushRabiei">@SoroushRabiei</a> ) اشاره کردند، مقدار صفر توسط سطر هایلایت شده به فرزند برگردونده میشه.</p>

<p><a href="https://twitter.com/mr_pouriya">@mr_pouriya</a>  هم مسیر همین اتفاق رو در FreeBSD پیدا کرد</p>

<p> <img src="/img/peyk-4.png" alt="کد پیک‌نوروزی ۴" /></p>
  <footer>
    <script type="text/javascript">
      !function(d,s,id){
          var js,fjs=d.getElementsByTagName(s)[0];
          if(!d.getElementById(id)){
              js=d.createElement(s);
              js.id=id;
              js.src="//platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js,fjs);
          }
      }(document,"script","twitter-wjs");
    </script>
    <a href="https://twitter.com/share"
       class="twitter-share-button"
       data-url="http://pykello.github.com/fa//fa/2022/05/%D9%BE%DB%8C%DA%A9-%D9%86%D9%88%D8%B1%D9%88%D8%B2%DB%8C-%DB%B1%DB%B4%DB%B0%DB%B1-%D8%B1%D9%88%D8%B2%D9%87%D8%A7%DB%8C-%DB%B1-%D8%AA%D8%A7-%DB%B4.html"
       data-dnt="true">
      "Tweet"</a>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.identifier = undefined;
        this.page.url = undefined;
        this.page.title = undefined;
        this.page.category_id = undefined;
      };
      var disqus_shortname = 'pykello';
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          dsq.setAttribute('data-timestamp', +new Date());
          (document.head || document.body).appendChild(dsq);
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
  </footer>
</article>
        </main>
        <footer>
            <hr />
            <p><a href="https://twitter.com/pykello"
                  class="twitter-follow-button"
                  data-show-count="false"
                  data-lang="en">
                 "Follow Hadi Moshayedi"
               </a>
               <script type="text/javascript">
                 !function(d,s,id){
                     var js,fjs=d.getElementsByTagName(s)[0];
                     if(!d.getElementById(id)){
                         js=d.createElement(s);
                         js.id=id;
                         js.src="//platform.twitter.com/widgets.js";
                         fjs.parentNode.insertBefore(js,fjs);
                     }
                 }(document,"script","twitter-wjs");
               </script></p>
          </footer>
    </div>
  </body>
</html>